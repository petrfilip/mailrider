dovecot_config_version = 2.4.1
dovecot_storage_version = 2.4.1

# Základní protokoly
protocols = imap

# Mail storage location (Dovecot 2.4 syntax)
# Use %{user | username} to get just the local part (inbox) without @domain
mail_driver = maildir
mail_path = /var/mail/faktron.local/%{user | username}/Maildir

# Autentizace - akceptuje jakéhokoliv uživatele s heslem "test"
passdb static {
  # Heslo je vždy "test" pro všechny uživatele
  passdb_static_password = test
}

userdb static {
  # Dynamicky vytváří uživatele pro jakéhokoliv, kdo se přihlásí
  fields {
    uid = 5000
    gid = 5000
    home = /var/mail/faktron.local/%{user | username}
  }
}

# IMAP služba
service imap-login {
  inet_listener imap {
    port = 143
  }
}

# SSL vypnuto (lokální dev)
ssl = no

# Auth (povolíme plaintext pro lokální dev)
auth_allow_cleartext = yes
auth_mechanisms = plain
auth_verbose = yes
auth_debug = yes

# Logy
log_path = /dev/stdout
info_log_path = /dev/stdout
debug_log_path = /dev/stdout

# Namespace
namespace inbox {
  inbox = yes
  prefix =
  separator = /
}
